module.exports=function(o){var t={};function e(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return o[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=o,e.c=t,e.d=function(o,t,r){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)e.d(r,n,function(t){return o[t]}.bind(null,n));return r},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=15)}([function(o,t){o.exports=flarum.core.compat["components/LoadingIndicator"]},function(o,t){o.exports=flarum.core.compat["common/Component"]},function(o,t){o.exports=flarum.core.compat["models/User"]},function(o,t){o.exports=flarum.core.compat.extend},function(o,t){o.exports=flarum.core.compat.Model},function(o,t){o.exports=flarum.core.compat["common/components/Link"]},,function(o,t){o.exports=flarum.core.compat["components/UserCard"]},function(o,t){o.exports=flarum.core.compat.Component},function(o,t){o.exports=flarum.core.compat["common/components/Tooltip"]},function(o,t){o.exports=flarum.core.compat["components/Modal"]},function(o,t){o.exports=flarum.core.compat["utils/ItemList"]},function(o,t){o.exports=flarum.core.compat["common/components/LinkButton"]},function(o,t){o.exports=flarum.core.compat["forum/components/UserPage"]},function(o,t){o.exports=flarum.core.compat["components/UserPage"]},function(o,t,e){"use strict";e.r(t);var r=e(3),n=e(7),s=e.n(n),a=e(2),i=e.n(a),c=e(4),u=e.n(c);function l(o,t){return(l=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(o,t)}function p(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,l(o,t)}var d=e(8),f=e.n(d),h=e(0),v=e.n(h),b=e(9),y=e.n(b),g=e(10),x=e.n(g),C=e(11),N=e.n(C),L=e(5),I=e.n(L),j=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t),this.loading=!1},e.className=function(){return"Modal--small"},e.title=function(){return"Información del cromo"},e.content=function(){return m("div",null,m("div",{className:"Modal-body"},this.data().toArray()),m("div",{className:"Modal-footer"},m(I.a,{href:"https://edoras.es/cromos.php?cromo="+this.attrs.cromo.id,external:!0,className:"Button",style:{margin:"0 10px"},"aria-label":"Detalles del cromo en la web"},"Detalles del cromo en la web")))},e.data=function(){var o=new N.a,t=this.attrs.cromo;return o.add("name",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Nombre:")," ",t.nombre))),o.add("type",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Tipo:")," ",t.tipo))),o.add("otorgado",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Otorgado el ")," ",t.fecha_otorgado," por ",m(I.a,{href:app.route("user",{username:t.staff})},t.staff)))),o.add("description",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Descripción: ")),m("p",null,t.descripcion))),o.add("evidencies",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Requisitos: ")),m("p",null,t.evidencias))),t.retroactividad&&o.add("retroactividad",m("div",{className:"CromoModalListItem"},m("p",null,m("b",null,"Retroactividad: ")),m("p",null,t.retroactividad_tiempo))),o},t}(x.a),M=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t),this.loading=!1},e.view=function(){var o,t,e=this.attrs.user;return t=this.loading?m("p",{className:"EdorasCromos-placeholder"},v.a.component({size:"tiny"})):Object.values(e.cromosVisibles).map((function(o){return m(y.a,{text:o.nombre},m("div",{className:"EdorasCromosListItem",onclick:function(){return app.modal.show(j,{cromo:o})}},m("div",{className:"EdorasCromosListItem-content"},m("img",{className:"EdorasCromosList-image",src:"https://edoras.es/img/cromos/"+o.url,alt:o.nombre}))))})),o=m("div",{className:"EdorasCromosList"},t),m("div",{className:"EdorasCromos-widget"},o)},t}(f.a),O=e(12),w=e.n(O),_=e(13),E=e.n(_),P=e(14),U=e.n(P),A=e(1),S=e.n(A),k=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t)},e.view=function(){var o=this.attrs.cromo;return m("div",{className:"EdorasCromosListAllItem",onclick:function(){return app.modal.show(j,{cromo:o})}},m("img",{className:"EdorasCromosListAllItem-image",src:"https://edoras.es/img/cromos/"+o.url,alt:o.nombre}),m("p",{className:"EdorasCromosListAllItem-name"},o.nombre))},t}(S.a),T=function(o){function t(){return o.apply(this,arguments)||this}return p(t,o),t.prototype.view=function(){var o=[];return this.attrs.user.cromos.map((function(t){if(!t)return null;o.push(t)})),m("div",{className:"UserCromos"},m("h3",null,"Lista completa de Cromos"),o.length>=1&&m("div",{className:"EdorasCromosListAll"},o.map((function(o){return m(k,{cromo:o})}))),o.length<1&&m("p",null,"Este usuario no tiene cromos"))},t}(S.a),V=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t),this.user=null,this.loading=!0,this.loadUser(m.route.param("username"))},e.content=function(){return!this.user||this.loading?m(v.a,{size:46}):T.component({user:this.user})},e.show=function(t){o.prototype.show.call(this,t),this.user=t;var e=null==t?void 0:t.attribute("displayName");if(!e)return null;var r=this;fetch("https://edoras.es/api/cromos/user/"+e,{}).then((function(o){return o.json()})).then((function(o){null!=o&&o.success&&(t.cromos=o.result,r.loading=!1,m.redraw())})).catch((function(o){return console.error(o)}))},t}(U.a);app.initializers.add("edoras-cromos",(function(){i.a.prototype.cromos=u.a.attribute("cromos"),i.a.prototype.cromosVisibles=u.a.attribute("cromosVisibles"),i.a.prototype.cantidadCromos=0,Object(r.extend)(s.a.prototype,"infoItems",(function(o){var t=this.attrs.user;!function(o){var t=null==o?void 0:o.attribute("displayName");if(!t)return null;var e="https://edoras.es/";fetch(e+"api/cromos/user/"+t+"/visible",{}).then((function(o){return o.json()})).then((function(t){null!=t&&t.success&&(o.cromosVisibles=t.result)})).catch((function(o){return console.error(o)})),fetch(e+"api/cromos/user/"+t+"/amount",{}).then((function(o){return o.json()})).then((function(t){null!=t&&t.success&&(o.cantidadCromos=t.result)})).catch((function(o){return console.error(o)}))}(t),o.add("cromos",M.component({user:t}),-10)})),app.routes["user.cromos"]={path:"/u/:username/cromos",component:V},Object(r.extend)(E.a.prototype,"navItems",(function(o){o.add("badges",w.a.component({href:app.route("user.cromos",{username:this.user.username()}),name:"badges",icon:"fas fa-user-tag"},["Cromos",m("span",{className:"Button-badge"},this.user.cantidadCromos)]),90)}))}))}]);
//# sourceMappingURL=forum.js.map