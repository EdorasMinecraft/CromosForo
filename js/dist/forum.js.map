{"version":3,"sources":["webpack://@cadiducho/edoras-cromos/webpack/bootstrap","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['common/Component']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['models/User']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['extend']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['Model']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['common/components/Link']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['components/UserCard']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['Component']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['common/components/Tooltip']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['components/Modal']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['utils/ItemList']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['common/components/LinkButton']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['forum/components/UserPage']\"","webpack://@cadiducho/edoras-cromos/external \"flarum.core.compat['components/UserPage']\"","webpack://@cadiducho/edoras-cromos/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@cadiducho/edoras-cromos/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromoModal.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/UserCromosVisibles.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromoComponent.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/UserCromosList.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromosProfilePage.js","webpack://@cadiducho/edoras-cromos/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","CromoModal","oninit","vnode","this","loading","className","title","content","data","toArray","href","attrs","cromo","id","external","style","margin","aria-label","items","ItemList","add","nombre","tipo","fecha_otorgado","app","route","username","staff","descripcion","evidencias","retroactividad","retroactividad_tiempo","Modal","UserCromosVisibles","view","subContent","user","LoadingIndicator","component","size","values","cromosVisibles","map","text","onclick","modal","show","src","url","alt","Component","CromoComponent","UserCromosList","cromos","push","length","CromosProfilePage","loadUser","param","attribute","that","fetch","then","response","json","success","result","redraw","error","console","UserPage","initializers","User","Model","cantidadCromos","extend","UserCard","HOST","findCromos","routes","path","LinkButton","icon"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,gBClFrDhC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAe,Q,cCA5CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAc,O,cCA3CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,2B,eCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAkB,W,cCA/CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,8B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,iC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,8B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,+FCArB,SAASC,EAAgB1B,EAAGqB,GAMzC,OALAK,EAAkBzB,OAAO0B,gBAAkB,SAAyB3B,EAAGqB,GAErE,OADArB,EAAE4B,UAAYP,EACPrB,IAGcA,EAAGqB,GCLb,SAASQ,EAAeC,EAAUC,GAC/CD,EAASX,UAAYlB,OAAOY,OAAOkB,EAAWZ,WAC9CW,EAASX,UAAUa,YAAcF,EACjCH,EAAeG,EAAUC,G,sGCANE,E,gGACjBC,OAAA,SAAOC,GACH,YAAMD,OAAN,UAAaC,GAEbC,KAAKC,SAAU,G,EAGnBC,UAAA,WACI,MAAO,gB,EAGXC,MAAA,WACI,MAAO,yB,EAGXC,QAAA,WACI,OACI,aACI,SAAKF,UAAU,cAAcF,KAAKK,OAAOC,WACzC,SAAKJ,UAAU,gBACX,EAAC,IAAD,CACIK,KAAM,sCAAwCP,KAAKQ,MAAMC,MAAMC,GAC/DC,UAAU,EACVT,UAAW,SACXU,MAAO,CACHC,OAAQ,UAEZC,aAAY,gCAPhB,mC,EAgBhBT,KAAA,WACI,IAAMU,EAAQ,IAAIC,IACdP,EAAQT,KAAKQ,MAAMC,MA6DvB,OA3DAM,EAAME,IACF,OACA,SAAKf,UAAW,sBACZ,WACI,sBADJ,IACoBO,EAAMS,UAKlCH,EAAME,IACF,OACA,SAAKf,UAAW,sBACZ,WACI,oBADJ,IACkBO,EAAMU,QAKhCJ,EAAME,IACF,WACA,SAAKf,UAAW,sBACZ,WACI,2BADJ,IACyBO,EAAMW,eAD/B,QACmD,EAAC,IAAD,CAAMb,KAAMc,IAAIC,MAAM,OAAQ,CAACC,SAAUd,EAAMe,SAAUf,EAAMe,UAK1HT,EAAME,IACF,cACA,SAAKf,UAAW,sBACZ,WACI,6BAEJ,WAAIO,EAAMgB,eAIlBV,EAAME,IACF,aACA,SAAKf,UAAW,sBACZ,WACI,4BAEJ,WAAIO,EAAMiB,cAIdjB,EAAMkB,gBACNZ,EAAME,IACF,iBACA,SAAKf,UAAW,sBACZ,WACI,gCAEJ,WAAIO,EAAMmB,yBAKfb,G,GAnGyBc,KCKnBC,E,gGACjBhC,OAAA,SAAOC,GACH,YAAMD,OAAN,UAAaC,GAObC,KAAKC,SAAU,G,EAGnB8B,KAAA,WACI,IACI3B,EAEA4B,EAHEC,EAAOjC,KAAKQ,MAAMyB,KAmCxB,OA7BID,EADAhC,KAAKC,QACQ,OAAGC,UAAU,4BAA4BgC,IAAiBC,UAAU,CAAEC,KAAM,UAE5EvE,OAAOwE,OAAOJ,EAAKK,gBAAgBC,KAAI,SAAC9B,GACjD,OACI,EAAC,IAAD,CACI+B,KAAM/B,EAAMS,QACZ,SAAKhB,UAAU,uBACVuC,QAAS,kBACLpB,IAAIqB,MAAMC,KAAK9C,EAAY,CACnBY,MAAOA,MAGpB,SAAKP,UAAU,gCACX,SAAKA,UAAU,yBACV0C,IAAK,gCAAkCnC,EAAMoC,IAC7CC,IAAKrC,EAAMS,eAQxCd,EACI,SAAKF,UAAU,oBACV8B,GAKL,SAAK9B,UAAU,uBACVE,I,GAlD+B2C,K,mECN3BC,E,gGACjBlD,OAAA,SAAOC,GACH,YAAMD,OAAN,UAAaC,I,EAGjBgC,KAAA,WACI,IAAMtB,EAAQT,KAAKQ,MAAMC,MACzB,OACI,SAAKP,UAAU,0BACVuC,QAAS,kBACLpB,IAAIqB,MAAMC,KAAK9C,EAAY,CACvBY,MAAOA,MAGhB,SAAKP,UAAU,gCACV0C,IAAK,gCAAkCnC,EAAMoC,IAC7CC,IAAKrC,EAAMS,SAGhB,OAAGhB,UAAU,gCACRO,EAAMS,U,GApBiB6B,KCAvBE,E,wFACjBlB,KAAA,WACI,IAAMmB,EAAS,GAQf,OANAlD,KAAKQ,MAAMyB,KAAKiB,OAAOX,KAAI,SAAC9B,GACxB,IAAKA,EAAO,OAAO,KAEnByC,EAAOC,KAAK1C,MAIZ,SAAKP,UAAU,cAEX,wCAECgD,EAAOE,QAAU,GAEd,SAAKlD,UAAU,uBACVgD,EACIX,KAAI,SAAC9B,GAAD,OACD,EAAC,EAAD,CAAgBA,MAAOA,QAItCyC,EAAOE,OAAS,GACb,6C,GAzBwBL,KCCvBM,E,gGACjBvD,OAAA,SAAOC,GACH,YAAMD,OAAN,UAAaC,GAEbC,KAAKiC,KAAO,KAEZjC,KAAKC,SAAU,EAEfD,KAAKsD,SAAS/F,EAAE+D,MAAMiC,MAAM,c,EAGhCnD,QAAA,WACI,OAAKJ,KAAKiC,MAAQjC,KAAKC,QACZ,EAAC,IAAD,CAAkBmC,KAAM,KAG5Ba,EAAed,UAAU,CAC5BF,KAAMjC,KAAKiC,Q,EAInBU,KAAA,SAAKV,GACD,YAAMU,KAAN,UAAWV,GACXjC,KAAKiC,KAAOA,EAEZ,IAAMvE,EAAI,MAAGuE,OAAH,EAAGA,EAAMuB,UAAU,eAC7B,IAAK9F,EAAM,OAAO,KAElB,IAII+F,EAAOzD,KAGX0D,MAJY,qCAAqBhG,EAItB,IACNiG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAC,GAEF,MAAIA,KAAUE,UACV7B,EAAKiB,OAASU,EAASG,OACvBN,EAAKxD,SAAU,EACf1C,EAAEyG,aAPd,OAUW,SAAAC,GAAK,OAAIC,QAAQD,MAAMA,O,GA7CKE,KCK/C9C,IAAI+C,aAAanD,IAAI,iBAAiB,WAClCoD,IAAKtF,UAAUmE,OAASoB,IAAMd,UAAU,UACxCa,IAAKtF,UAAUuD,eAAiBgC,IAAMd,UAAU,kBAChDa,IAAKtF,UAAUwF,eAAiB,EAEhCC,iBAAOC,IAAS1F,UAAW,aAAa,SAASgC,GAC7C,IAAIkB,EAAOjC,KAAKQ,MAAMyB,MA4C9B,SAAoBA,GAChB,IAAMvE,EAAI,MAAGuE,OAAH,EAAGA,EAAMuB,UAAU,eAC7B,IAAK9F,EAAM,OAAO,KAElB,IAAMgH,EAAO,qBAGbhB,MAASgB,EAFQ,mBAEUhH,EAAtB,WAAsC,IACtCiG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAC,GACF,MAAIA,KAAUE,UACV7B,EAAKK,eAAiBsB,EAASG,WAJ3C,OAQW,SAAAE,GAAK,OAAIC,QAAQD,MAAMA,MAElCP,MAASgB,EAZQ,mBAYUhH,EAAtB,UAAqC,IACrCiG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAC,GACF,MAAIA,KAAUE,UACV7B,EAAKsC,eAAiBX,EAASG,WAJ3C,OAQW,SAAAE,GAAK,OAAIC,QAAQD,MAAMA,MAnE9BU,CAAW1C,GAEXlB,EAAME,IACF,SACAa,EAAmBK,UAAU,CACzBF,UAEH,OAITZ,IAAIuD,OAAO,eAAiB,CACxBC,KAAM,sBACN1C,UAAWkB,GAGfmB,iBAAOL,IAASpF,UAAW,YAAY,SAAUgC,GAC7CA,EAAME,IACF,SACA6D,IAAW3C,UACP,CACI5B,KAAMc,IAAIC,MAAM,cAAe,CAC3BC,SAAUvB,KAAKiC,KAAKV,aAExB7D,KAAM,SACNqH,KAAM,mBAEV,CACI,SACA,UAAM7E,UAAU,gBAAgBF,KAAKiC,KAAKsC,kBAGlD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['components/UserCard'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['forum/components/UserPage'];","module.exports = flarum.core.compat['components/UserPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import Modal from \"flarum/components/Modal\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class CromoModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.loading = false;\n    }\n\n    className() {\n        return \"Modal--small\";\n    }\n\n    title() {\n        return \"Información del cromo\";\n    }\n\n    content() {\n        return (\n            <div>\n                <div className=\"Modal-body\">{this.data().toArray()}</div>\n                <div className=\"Modal-footer\">\n                    <Link\n                        href={'https://edoras.es/cromos.php?cromo=' + this.attrs.cromo.id}\n                        external={true}\n                        className={\"Button\"}\n                        style={{\n                            margin: \"0 10px\",\n                        }}\n                        aria-label={\"Detalles del cromo en la web\"}\n                    >\n                        Detalles del cromo en la web\n                    </Link>\n                </div>\n            </div>\n        );\n    }\n\n    data() {\n        const items = new ItemList();\n        let cromo = this.attrs.cromo;\n\n        items.add(\n            \"name\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Nombre:</b> {cromo.nombre}\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"type\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Tipo:</b> {cromo.tipo}\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"otorgado\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Otorgado el </b> {cromo.fecha_otorgado} por <Link href={app.route('user', {username: cromo.staff})}>{cromo.staff}</Link>\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"description\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Descripción: </b>\n                </p>\n                <p>{cromo.descripcion}</p>\n            </div>\n        );\n\n        items.add(\n            \"evidencies\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Requisitos: </b>\n                </p>\n                <p>{cromo.evidencias}</p>\n            </div>\n        );\n\n        if (cromo.retroactividad) {\n            items.add(\n                \"retroactividad\",\n                <div className={\"CromoModalListItem\"}>\n                    <p>\n                        <b>Retroactividad: </b>\n                    </p>\n                    <p>{cromo.retroactividad_tiempo}</p>\n                </div>\n            );\n        }\n\n        return items;\n    }\n}\n","import Component from 'flarum/Component';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport Tooltip from \"flarum/common/components/Tooltip\";\nimport CromoModal from \"./CromoModal\";\n\n/**\n * The `UserCromos` component displays a user's comos, optionally letting the user\n * edit it.\n */\nexport default class UserCromosVisibles extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        /**\n         * Whether or not the cromos is currently being saved.\n         *\n         * @type {Boolean}\n         */\n        this.loading = false;\n    }\n\n    view() {\n        const user = this.attrs.user;\n        let content;\n\n        let subContent;\n\n        if (this.loading) {\n            subContent = <p className=\"EdorasCromos-placeholder\">{LoadingIndicator.component({ size: 'tiny' })}</p>;\n        } else {\n            subContent = Object.values(user.cromosVisibles).map((cromo) => {\n                return (\n                    <Tooltip\n                        text={cromo.nombre}>\n                        <div className=\"EdorasCromosListItem\"\n                             onclick={() =>\n                                 app.modal.show(CromoModal, {\n                                         cromo: cromo\n                                     }\n                                 )}>\n                            <div className=\"EdorasCromosListItem-content\">\n                                <img className=\"EdorasCromosList-image\"\n                                     src={'https://edoras.es/img/cromos/' + cromo.url}\n                                     alt={cromo.nombre}/>\n                            </div>\n                        </div>\n                    </Tooltip>\n                )\n            });\n        }\n\n        content = (\n            <div className=\"EdorasCromosList\">\n                {subContent}\n            </div>\n        );\n\n        return (\n            <div className='EdorasCromos-widget'>\n                {content}\n            </div>\n        );\n    }\n}\n","import Component from \"flarum/common/Component\";\nimport CromoModal from \"./CromoModal\";\n\nexport default class CromoComponent extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    view() {\n        const cromo = this.attrs.cromo;\n        return (\n            <div className=\"EdorasCromosListAllItem\"\n                 onclick={() =>\n                     app.modal.show(CromoModal, {\n                         cromo: cromo\n                     })}\n            >\n                <img className=\"EdorasCromosListAllItem-image\"\n                     src={'https://edoras.es/img/cromos/' + cromo.url}\n                     alt={cromo.nombre}\n                />\n\n                <p className=\"EdorasCromosListAllItem-name\">\n                    {cromo.nombre}\n                </p>\n            </div>\n        );\n    }\n}\n","import Component from \"flarum/common/Component\";\nimport CromoComponent from \"./CromoComponent\";\n\nexport default class UserCromosList extends Component {\n    view() {\n        const cromos = [];\n\n        this.attrs.user.cromos.map((cromo) => {\n            if (!cromo) return null;\n\n            cromos.push(cromo);\n        });\n\n        return (\n            <div className=\"UserCromos\">\n\n                <h3>Lista completa de Cromos</h3>\n\n                {cromos.length >= 1 && (\n\n                    <div className=\"EdorasCromosListAll\">\n                        {cromos\n                            .map((cromo) => (\n                                <CromoComponent cromo={cromo}/>\n                        ))}\n                    </div>\n                )}\n                {cromos.length < 1 && (\n                    <p>Este usuario no tiene cromos</p>\n                )}\n            </div>\n        );\n    }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport UserCromosList from \"./UserCromosList\";\n\nexport default class CromosProfilePage extends UserPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.user = null;\n\n        this.loading = true;\n\n        this.loadUser(m.route.param(\"username\"));\n    }\n\n    content() {\n        if (!this.user || this.loading) {\n            return <LoadingIndicator size={46} />;\n        }\n\n        return UserCromosList.component({\n            user: this.user,\n        });\n    }\n\n    show(user) {\n        super.show(user);\n        this.user = user;\n\n        const name = user?.attribute('displayName');\n        if (!name) return null;\n\n        const HOST = `https://edoras.es/`;\n        const ENDPOINT = `api/cromos/user/`;\n\n        const url = `${HOST}${ENDPOINT}${name}`\n        let that = this;\n\n\n        fetch(url, {})\n            .then(response => response.json())\n            .then(response => {\n\n                if (response?.success) {\n                    user.cromos = response.result;\n                    that.loading = false;\n                    m.redraw();\n                }\n            })\n            .catch(error => console.error(error))\n    }\n}\n","import {extend} from 'flarum/extend';\nimport UserCard from 'flarum/components/UserCard';\nimport User from 'flarum/models/User';\nimport Model from 'flarum/Model';\nimport UserCromosVisibles from './components/UserCromosVisibles';\nimport LinkButton from \"flarum/common/components/LinkButton\";\nimport UserPage from \"flarum/forum/components/UserPage\";\nimport CromosProfilePage from \"./components/CromosProfilePage\";\n\napp.initializers.add('edoras-cromos', () => {\n    User.prototype.cromos = Model.attribute('cromos');\n    User.prototype.cromosVisibles = Model.attribute('cromosVisibles');\n    User.prototype.cantidadCromos = 0;\n\n    extend(UserCard.prototype, 'infoItems', function(items) {\n        let user = this.attrs.user;\n\n        findCromos(user);\n\n        items.add(\n            'cromos',\n            UserCromosVisibles.component({\n                user,\n            }),\n            -10\n        );\n    });\n\n    app.routes[\"user.cromos\"] = {\n        path: \"/u/:username/cromos\",\n        component: CromosProfilePage,\n    };\n\n    extend(UserPage.prototype, \"navItems\", function (items) {\n        items.add(\n            \"badges\",\n            LinkButton.component(\n                {\n                    href: app.route(\"user.cromos\", {\n                        username: this.user.username(),\n                    }),\n                    name: \"badges\",\n                    icon: \"fas fa-user-tag\",\n                },\n                [\n                    \"Cromos\",\n                    <span className=\"Button-badge\">{this.user.cantidadCromos}</span>\n                ]\n            ),\n            90\n        );\n    });\n});\n\n/**\n * Search the Cromos for the given User\n * @param user { object } - username from the user Model\n * @returns null\n */\nfunction findCromos(user) {\n    const name = user?.attribute('displayName');\n    if (!name) return null;\n\n    const HOST = `https://edoras.es/`;\n    const ENDPOINT = `api/cromos/user/`;\n\n    fetch(`${HOST}${ENDPOINT}${name}/visible`, {})\n        .then(response => response.json())\n        .then(response => {\n            if (response?.success) {\n                user.cromosVisibles = response.result;\n            }\n            // TODO: Handle response error\n        })\n        .catch(error => console.error(error))\n\n    fetch(`${HOST}${ENDPOINT}${name}/amount`, {})\n        .then(response => response.json())\n        .then(response => {\n            if (response?.success) {\n                user.cantidadCromos = response.result;\n            }\n            // TODO: Handle response error\n        })\n        .catch(error => console.error(error))\n\n    return null;\n}\n\n"],"sourceRoot":""}