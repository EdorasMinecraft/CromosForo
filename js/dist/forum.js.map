{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@cadiducho/edoras-cromos/webpack/bootstrap","webpack://@cadiducho/edoras-cromos/webpack/runtime/compat get default export","webpack://@cadiducho/edoras-cromos/webpack/runtime/define property getters","webpack://@cadiducho/edoras-cromos/webpack/runtime/hasOwnProperty shorthand","webpack://@cadiducho/edoras-cromos/webpack/runtime/make namespace object","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['extend']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['components/UserCard']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['models/User']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['Model']\"","webpack://@cadiducho/edoras-cromos/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@cadiducho/edoras-cromos/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['Component']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['components/Modal']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['common/components/Link']\"","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromoModal.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/UserCromosVisibles.js","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['components/UserPage']\"","webpack://@cadiducho/edoras-cromos/external root \"flarum.core.compat['common/Component']\"","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromoComponent.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/UserCromosList.js","webpack://@cadiducho/edoras-cromos/./src/forum/components/CromosProfilePage.js","webpack://@cadiducho/edoras-cromos/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","import Modal from \"flarum/components/Modal\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class CromoModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.loading = false;\n    }\n\n    className() {\n        return \"Modal--small\";\n    }\n\n    title() {\n        return \"Información del cromo\";\n    }\n\n    content() {\n        return (\n            <div>\n                <div className=\"Modal-body\">{this.data().toArray()}</div>\n                <div className=\"Modal-footer\">\n                    <Link\n                        href={'https://edoras.es/cromos.php?cromo=' + this.attrs.cromo.id}\n                        external={true}\n                        className={\"Button\"}\n                        style={{\n                            margin: \"0 10px\",\n                        }}\n                        aria-label={\"Detalles del cromo en la web\"}\n                    >\n                        Detalles del cromo en la web\n                    </Link>\n                </div>\n            </div>\n        );\n    }\n\n    data() {\n        const items = new ItemList();\n        let cromo = this.attrs.cromo;\n\n        items.add(\n            \"name\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Nombre:</b> {cromo.nombre}\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"type\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Tipo:</b> {cromo.tipo}\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"otorgado\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Otorgado el </b> {cromo.fecha_otorgado} por <Link href={app.route('user', {username: cromo.staff})}>{cromo.staff}</Link>\n                </p>\n            </div>\n        );\n\n        items.add(\n            \"description\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Descripción: </b>\n                </p>\n                <p>{cromo.descripcion}</p>\n            </div>\n        );\n\n        items.add(\n            \"evidencies\",\n            <div className={\"CromoModalListItem\"}>\n                <p>\n                    <b>Requisitos: </b>\n                </p>\n                <p>{cromo.evidencias}</p>\n            </div>\n        );\n\n        if (cromo.retroactividad) {\n            items.add(\n                \"retroactividad\",\n                <div className={\"CromoModalListItem\"}>\n                    <p>\n                        <b>Retroactividad: </b>\n                    </p>\n                    <p>{cromo.retroactividad_tiempo}</p>\n                </div>\n            );\n        }\n\n        return items;\n    }\n}\n","import Component from 'flarum/Component';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport Tooltip from \"flarum/common/components/Tooltip\";\nimport CromoModal from \"./CromoModal\";\n\n/**\n * The `UserCromos` component displays a user's comos, optionally letting the user\n * edit it.\n */\nexport default class UserCromosVisibles extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        /**\n         * Whether or not the cromos is currently being saved.\n         *\n         * @type {Boolean}\n         */\n        this.loading = false;\n    }\n\n    view() {\n        const user = this.attrs.user;\n        let content;\n\n        let subContent;\n\n        if (this.loading) {\n            subContent = <p className=\"EdorasCromos-placeholder\">{LoadingIndicator.component({ size: 'tiny' })}</p>;\n        } else {\n            subContent = Object.values(user.cromosVisibles).map((cromo) => {\n                return (\n                    <Tooltip\n                        text={cromo.nombre}>\n                        <div className=\"EdorasCromosListItem\"\n                             onclick={() =>\n                                 app.modal.show(CromoModal, {\n                                         cromo: cromo\n                                     }\n                                 )}>\n                            <div className=\"EdorasCromosListItem-content\">\n                                <img className=\"EdorasCromosList-image\"\n                                     src={'https://edoras.es/img/cromos/' + cromo.url}\n                                     alt={cromo.nombre}/>\n                            </div>\n                        </div>\n                    </Tooltip>\n                )\n            });\n        }\n\n        content = (\n            <div className=\"EdorasCromosList\">\n                {subContent}\n            </div>\n        );\n\n        return (\n            <div className='EdorasCromos-widget'>\n                {content}\n            </div>\n        );\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from \"flarum/common/Component\";\nimport CromoModal from \"./CromoModal\";\n\nexport default class CromoComponent extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    view() {\n        const cromo = this.attrs.cromo;\n        return (\n            <div className=\"EdorasCromosListAllItem\"\n                 onclick={() =>\n                     app.modal.show(CromoModal, {\n                         cromo: cromo\n                     })}\n            >\n                <img className=\"EdorasCromosListAllItem-image\"\n                     src={'https://edoras.es/img/cromos/' + cromo.url}\n                     alt={cromo.nombre}\n                />\n\n                <p className=\"EdorasCromosListAllItem-name\">\n                    {cromo.nombre}\n                </p>\n            </div>\n        );\n    }\n}\n","import Component from \"flarum/common/Component\";\nimport CromoComponent from \"./CromoComponent\";\n\nexport default class UserCromosList extends Component {\n    view() {\n        const cromos = [];\n\n        this.attrs.user.cromos.map((cromo) => {\n            if (!cromo) return null;\n\n            cromos.push(cromo);\n        });\n\n        return (\n            <div className=\"UserCromos\">\n\n                <h3>Lista completa de Cromos</h3>\n\n                {cromos.length >= 1 && (\n\n                    <div className=\"EdorasCromosListAll\">\n                        {cromos\n                            .map((cromo) => (\n                                <CromoComponent cromo={cromo}/>\n                        ))}\n                    </div>\n                )}\n                {cromos.length < 1 && (\n                    <p>Este usuario no tiene cromos</p>\n                )}\n            </div>\n        );\n    }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport UserCromosList from \"./UserCromosList\";\n\nexport default class CromosProfilePage extends UserPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.user = null;\n\n        this.loading = true;\n\n        this.loadUser(m.route.param(\"username\"));\n    }\n\n    content() {\n        if (!this.user || this.loading) {\n            return <LoadingIndicator size={46} />;\n        }\n\n        return UserCromosList.component({\n            user: this.user,\n        });\n    }\n\n    show(user) {\n        super.show(user);\n        this.user = user;\n\n        const name = user?.attribute('displayName');\n        if (!name) return null;\n\n        const HOST = `https://edoras.es/`;\n        const ENDPOINT = `api/cromos/user/`;\n\n        const url = `${HOST}${ENDPOINT}${name}`\n        let that = this;\n\n\n        fetch(url, {})\n            .then(response => response.json())\n            .then(response => {\n\n                if (response?.success) {\n                    user.cromos = response.result;\n                    that.loading = false;\n                    m.redraw();\n                }\n            })\n            .catch(error => console.error(error))\n    }\n}\n","import {extend} from 'flarum/extend';\nimport UserCard from 'flarum/components/UserCard';\nimport User from 'flarum/models/User';\nimport Model from 'flarum/Model';\nimport UserCromosVisibles from './components/UserCromosVisibles';\nimport LinkButton from \"flarum/common/components/LinkButton\";\nimport UserPage from \"flarum/forum/components/UserPage\";\nimport CromosProfilePage from \"./components/CromosProfilePage\";\n\napp.initializers.add('edoras-cromos', () => {\n    User.prototype.cromos = Model.attribute('cromos');\n    User.prototype.cromosVisibles = Model.attribute('cromosVisibles');\n    User.prototype.cantidadCromos = 0;\n\n    extend(UserCard.prototype, 'infoItems', function(items) {\n        let user = this.attrs.user;\n\n        findCromos(user);\n\n        items.add(\n            'cromos',\n            UserCromosVisibles.component({\n                user,\n            }),\n            -10\n        );\n    });\n\n    app.routes[\"user.cromos\"] = {\n        path: \"/u/:username/cromos\",\n        component: CromosProfilePage,\n    };\n\n    extend(UserPage.prototype, \"navItems\", function (items) {\n        items.add(\n            \"badges\",\n            LinkButton.component(\n                {\n                    href: app.route(\"user.cromos\", {\n                        username: this.user.username(),\n                    }),\n                    name: \"badges\",\n                    icon: \"fas fa-user-tag\",\n                },\n                [\n                    \"Cromos\",\n                    <span className=\"Button-badge\">{this.user.cantidadCromos}</span>\n                ]\n            ),\n            90\n        );\n    });\n});\n\n/**\n * Search the Cromos for the given User\n * @param user { object } - username from the user Model\n * @returns null\n */\nfunction findCromos(user) {\n    const name = user?.attribute('displayName');\n    if (!name) return null;\n\n    const HOST = `https://edoras.es/`;\n    const ENDPOINT = `api/cromos/user/`;\n\n    fetch(`${HOST}${ENDPOINT}${name}/visible`, {})\n        .then(response => response.json())\n        .then(response => {\n            if (response?.success) {\n                user.cromosVisibles = response.result;\n            }\n            // TODO: Handle response error\n        })\n        .catch(error => console.error(error))\n\n    fetch(`${HOST}${ENDPOINT}${name}/amount`, {})\n        .then(response => response.json())\n        .then(response => {\n            if (response?.success) {\n                user.cantidadCromos = response.result;\n            }\n            // TODO: Handle response error\n        })\n        .catch(error => console.error(error))\n\n    return null;\n}\n\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","CromoModal","oninit","vnode","this","loading","className","title","content","data","toArray","href","attrs","cromo","id","external","style","margin","items","ItemList","add","nombre","tipo","fecha_otorgado","app","route","username","staff","descripcion","evidencias","retroactividad","retroactividad_tiempo","Modal","UserCromosVisibles","view","subContent","user","LoadingIndicator","size","values","cromosVisibles","map","text","onclick","modal","show","src","url","alt","Component","CromoComponent","UserCromosList","cromos","push","length","CromosProfilePage","loadUser","m","param","component","name","attribute","that","fetch","then","response","json","success","result","redraw","error","console","UserPage","initializers","User","Model","extend","UserCard","HOST","ENDPOINT","cantidadCromos","findCromos","routes","path","LinkButton","icon"],"sourceRoot":""}